Intention: Make use of existing tools to parse/pretty print, round
   trip haskell code.

Possible tools
  GHC API
  Buildwrapper
  hint
  haskell-src-exts

Probably in combination

Other things to look at
  haskell-mode
  ghc-mod - uses ghc API directly

Buildwrapper is already IDE-aware

Can a lense be used to present the pfe parse tree as if it were the
   GHC one?

From "Technical Report - Porting HaRe to the GHC API":

The porting process was centered on four modules, 
  RefacLocUtils.hs,
  RefacUtils.hs, 
  RefacTypeSyn.hs and 
  RefacUtils.hs

  RefacTypeUtils?

Looks like ifToCase is a really simple start point: but no tests
           refacDataNewType

-------------------

Dependencies
------------

ghc-mod
  ghc api
  
haskell-src-exts
  buildwrapper (also ghc-api)

buildwrapper
  haskell-src-exts (also ghc-api)

hint
  haskell-src (and ghc-api)

haskell-mode
 - elisp only

-----------------------------

Tasks

1. Understand round-tripping of source using GHC


    getRichTokenStream :: GhcMonad m => Module -> m [(Located Token, String)]

      Give even more information on the source than getTokenStream
      This function allows reconstructing the source completely with
      showRichTokenStream.

    showRichTokenStream :: [(Located Token, String)] -> StringSource

      Take a rich token stream such as produced from
      getRichTokenStream and return source code almost identical to the
      original code (except for insignificant whitespace.)

    Seems to work.

2. Get a handle on Data.Generics / SYB / Stafunski

3. Identify how to modify the GHC output, and push it out again



